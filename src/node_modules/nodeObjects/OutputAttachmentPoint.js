var AttachmentPoint = require('./AttachmentPoint');

function OutputAttachmentPoint() {
	AttachmentPoint.call(this);
	this.connections = [];
	this.isOutputAttachmentPoint = true;
}

OutputAttachmentPoint.prototype = Object.create(THREE.Mesh.prototype);

OutputAttachmentPoint.prototype.clone = function() {
	var clone = new OutputAttachmentPoint();
	THREE.Mesh.prototype.copy.call(clone, this);
	return clone;
};

OutputAttachmentPoint.prototype.dispatch = function(value) {
	var _this = this;
	this.connections.map(function(connection) {
		if(connection.nodes[0] === _this) {
			return connection.nodes[1];
		} else {
			return connection.nodes[0];
		}
	}).filter(function(node) {
		return node.updateValue;
	}).forEach(function(recievingInput) {
		recievingInput.updateValue(value);
	});
};
module.exports = OutputAttachmentPoint;
