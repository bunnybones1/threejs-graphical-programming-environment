var THREE = require('three');
var __tempVec3 = new THREE.Vector3();
function clipspaceToWorld(x, y, camera) {
	__tempVec3.x = x;
	__tempVec3.y = -y;
	__tempVec3.z = 0.5;
	__tempVec3.unproject(camera);
	//the following only works as long as the camera faces perfectly down the z axis and you want the result at 0 in the z axis.
	//if you want a general solution for any position of the camera, then you must use matrix and inverse matrix operations as well as passing the desired z-depth from camera
	__tempVec3.sub(camera.position);
	__tempVec3.normalize();
	__tempVec3.multiplyScalar(camera.position.z / Math.abs(__tempVec3.z));
	__tempVec3.add(camera.position);
	//

	return __tempVec3;
}

module.exports = clipspaceToWorld;
